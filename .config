# =============================================
# OpenWrt 编译配置文件 - Netgear WNDR3800 专用
# =============================================

# === 目标设备配置 ===
# ath79 架构，Netgear WNDR3800 具体型号
CONFIG_TARGET_ath79=y
CONFIG_TARGET_ath79_generic=y
CONFIG_TARGET_ath79_generic_DEVICE_netgear_wndr3800=y

# === 镜像配置 ===
CONFIG_TARGET_ROOTFS_SQUASHFS=y            # SquashFS 文件系统
CONFIG_TARGET_ROOTFS_PARTSIZE=128          # WNDR3800 只有 128MB 闪存

# === 内核配置 ===
CONFIG_LINUX_5_15=y
CONFIG_KERNEL_BUILD_USER="OpenWrt"
CONFIG_KERNEL_BUILD_DOMAIN="openwrt.org"

# === 基础系统（必需）===
CONFIG_PACKAGE_base-files=y
CONFIG_PACKAGE_busybox=y
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_dropbear=y
CONFIG_PACKAGE_firewall=y
CONFIG_PACKAGE_fstools=y
CONFIG_PACKAGE_libc=y
CONFIG_PACKAGE_libgcc=y
CONFIG_PACKAGE_logd=y
CONFIG_PACKAGE_mtd=y
CONFIG_PACKAGE_netifd=y
CONFIG_PACKAGE_opkg=y
CONFIG_PACKAGE_procd=y
CONFIG_PACKAGE_ubox=y
CONFIG_PACKAGE_ubus=y
CONFIG_PACKAGE_ubusd=y
CONFIG_PACKAGE_uci=y
CONFIG_PACKAGE_usign=y

# === 系统工具 ===
CONFIG_PACKAGE_bash=y                      # Bash shell
CONFIG_PACKAGE_htop=y                      # 进程监控
CONFIG_PACKAGE_nano=y                      # 文本编辑器
CONFIG_PACKAGE_curl=y                      # 网络工具

# === 网络基础 ===
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_dnsmasq_full_dhcp=y
CONFIG_PACKAGE_iptables=y
CONFIG_PACKAGE_iptables-mod-conntrack-extra=y
CONFIG_PACKAGE_ip-full=y

# === IPv6 支持 ===
CONFIG_PACKAGE_ipv6helper=y
CONFIG_PACKAGE_odhcp6c=y
CONFIG_PACKAGE_odhcpd-ipv6only=y

# === 存储和文件系统 ===
CONFIG_PACKAGE_automount=y                 # 自动挂载
CONFIG_PACKAGE_block-mount=y               # 块设备挂载
CONFIG_PACKAGE_blkid=y                     # 磁盘信息
CONFIG_PACKAGE_lsblk=y                     # 列出块设备

# === 内核模块 - 文件系统 ===
CONFIG_PACKAGE_kmod-fs-ext4=y              # EXT4 支持
CONFIG_PACKAGE_kmod-fs-vfat=y              # FAT 支持
CONFIG_PACKAGE_kmod-fs-ntfs3=y             # NTFS 支持
CONFIG_PACKAGE_kmod-nls-utf8=y             # UTF-8 编码
CONFIG_PACKAGE_kmod-nls-cp437=y            # CP437 编码

# === 内核模块 - USB 支持 ===
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-ledtrig-usbport=y

# === 内核模块 - 无线网络 ===
CONFIG_PACKAGE_kmod-ath=y
CONFIG_PACKAGE_kmod-ath9k=y
CONFIG_PACKAGE_kmod-ath9k-common=y
CONFIG_PACKAGE_kmod-cfg80211=y
CONFIG_PACKAGE_kmod-mac80211=y
CONFIG_PACKAGE_wpad-openssl=y

# === 内核模块 - 网络 ===
CONFIG_PACKAGE_kmod-ipt-conntrack=y
CONFIG_PACKAGE_kmod-ipt-core=y
CONFIG_PACKAGE_kmod-ipt-nat=y
CONFIG_PACKAGE_kmod-nf-conntrack=y
CONFIG_PACKAGE_kmod-nf-nat=y

# === LuCI Web 界面 ===
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_luci-proto-ipv6=y
CONFIG_PACKAGE_luci-proto-ppp=y

# === LuCI 应用（精选常用）===
CONFIG_PACKAGE_luci-app-automount=y        # 自动挂载
CONFIG_PACKAGE_luci-app-firewall=y         # 防火墙
CONFIG_PACKAGE_luci-app-upnp=y             # UPnP 端口转发
CONFIG_PACKAGE_luci-app-samba=y            # 网络共享
CONFIG_PACKAGE_luci-app-vsftpd=y           # FTP 服务器
CONFIG_PACKAGE_luci-app-turboacc=y         # 网络加速
CONFIG_PACKAGE_luci-app-sqm=y              # 流量整形
CONFIG_PACKAGE_luci-app-diskman=y          # 磁盘管理
CONFIG_PACKAGE_luci-app-hd-idle=y          # 硬盘休眠
CONFIG_PACKAGE_luci-app-parentcontrol=y    # 家长控制

# === 网络服务 ===
CONFIG_PACKAGE_uhttpd=y                    # Web 服务器
CONFIG_PACKAGE_uhttpd-mod-ubus=y
CONFIG_PACKAGE_miniupnpd=y                 # UPnP 服务
CONFIG_PACKAGE_samba36-server=y            # Samba 服务
CONFIG_PACKAGE_vsftpd-alt=y                # FTP 服务
CONFIG_PACKAGE_hd-idle=y                   # 硬盘休眠服务

# === 流量整形 ===
CONFIG_PACKAGE_sqm-scripts=y

# === 中文语言包 ===
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y
CONFIG_PACKAGE_luci-i18n-firewall-zh-cn=y
CONFIG_PACKAGE_luci-i18n-upnp-zh-cn=y
CONFIG_PACKAGE_luci-i18n-samba-zh-cn=y
CONFIG_PACKAGE_luci-i18n-automount-zh-cn=y
CONFIG_PACKAGE_luci-i18n-hd-idle-zh-cn=y
CONFIG_PACKAGE_luci-i18n-parentcontrol-zh-cn=y  # 家长控制中文

# =============================================
# 删除不需要的插件 - 使用正确语法
# =============================================
# CONFIG_PACKAGE_luci-app-accesscontrol is not set    # 上网时间控制（删除）
# CONFIG_PACKAGE_luci-app-ddns is not set             # 动态DNS（删除）
# CONFIG_PACKAGE_luci-app-nlbwmon is not set          # 带宽监控（删除）
# CONFIG_PACKAGE_luci-app-wol is not set              # 网络唤醒（删除）
# CONFIG_PACKAGE_luci-app-autoreboot is not set       # 定时重启（删除，避免重复）

# =============================================
# 以下为可选的配置，根据需求取消注释
# =============================================

# === 可选：KMS 激活服务器 ===
CONFIG_PACKAGE_luci-app-vlmcsd=y
CONFIG_PACKAGE_vlmcsd=y

# === 可选：SmartDNS DNS 优化 ===
CONFIG_PACKAGE_luci-app-smartdns=y
CONFIG_PACKAGE_smartdns=y

# === 可选：更多网络工具 ===
CONFIG_PACKAGE_iptables-mod-fullconenat=y  # 全锥形 NAT
CONFIG_PACKAGE_tcp-bbr=y                   # BBR 拥塞控制

# === 可选：更多文件系统支持 ===
CONFIG_PACKAGE_kmod-fs-exfat=y             # exFAT 支持
CONFIG_PACKAGE_kmod-fs-btrfs=y             # Btrfs 支持

# === 可选：USB 3.0 支持（WNDR3800 没有 USB 3.0）===
# CONFIG_PACKAGE_kmod-usb3=y
# CONFIG_PACKAGE_kmod-usb-xhci-hcd=y
